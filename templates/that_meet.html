{% extends 'base.html' %}

{% block content %}

    <nav class="that_nav">

        <div class="menus">
            <p class="home home_1"><a href="/">БАСТЫ БЕТ</a></p>
            <p class="home home_1">/</p>
            <p class="home home_2">{{ product.category_title }}</p>
        </div>

        <div class="navs">
            <div class="img_nav">
                <img src="{{ product.photo }}" alt="">
<!--                <div class="fotos">-->
<!--                    <img src="https://kublei.kz/fileadmin/user_upload/products/Gov9dina/Rebernaja_chast.jpg" alt="">-->
<!--                    <img src="https://kublei.kz/fileadmin/user_upload/products/Gov9dina/Rebernaja_chast.jpg" alt="">-->
<!--                    <img src="https://kublei.kz/fileadmin/user_upload/products/Gov9dina/Rebernaja_chast.jpg" alt="">-->
<!--                </div>-->
            </div>

            <div class="texts_nav">
                <h1>{{ product.title }}</h1>
                <p class="price">{{ product.sale_cost }}тг</p>
                <p class="text" style="line-height:1.5em;">{{ product.description }}</p>
                <div class="product_action">
                    <div class="product_select">
                        <div class="custom-spinner">
                            <input type="number" id="spinner" value="1" step="1" min="0" oninput="validateNumberInput(this)" />
                            <div class="custom-spinner-controls">
                                <button onclick="increment()">▲</button>
                                <button onclick="decrement()">▼</button>
                            </div>
                        </div>
                    </div>
                    <a class="btn-1" href="#"><i class='bx bx-cart'></i>Себетке қосу</a>
                </div>
            </div>
        </div>
    </nav>

    <script>
        const input = document.getElementById('spinner');

        function increment() {
            const current = parseFloat(input.value || 0);
            const fractional = current % 1;
            const next = Math.floor(current + 1) + fractional;
            input.value = next.toFixed(10).replace(/\.0+$/, '').replace(/(\.\d+?)0+$/, '$1');
        }

        function decrement() {
            const current = parseFloat(input.value || 0);
            const next = Math.max(0, current - 1);
            input.value = next.toFixed(10).replace(/\.0+$/, '').replace(/(\.\d+?)0+$/, '$1');
        }

        function validateNumberInput(el) {
            el.value = el.value.replace(/[^0-9]/g, '');
        }
    </script>

{% endblock %}